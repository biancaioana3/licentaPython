from flask import Flask, request, jsonify
from flask_cors import CORS
import mysql.connector

app = Flask(__name__)
CORS(app)  # Permit toate originile

# Configurațiile bazei de date MySQL
db_config = {
    'host': '127.0.0.1',
    'port': 3306,
    'user': 'root',
    'password': '',
    'database': 'HRSystem'
}

@app.route('/recomanda-candidati', methods=['POST'])
# def recomanda_candidati():
#     # Primește datele CV-ului din request
#     cv_data = request.json
#
#     # Aici poți adăuga logica ta de machine learning pentru a genera recomandări
#     # În acest exemplu, vom returna un JSON cu o listă de recomandări
#     recomandari = ["Candidatul A", "Candidatul B", "Candidatul C"]
#
#     # Returnează recomandările sub formă de JSON
#     return jsonify({'recomandari': recomandari})

def recomanda_candidati():
    # Conectare la baza de date
    connection = mysql.connector.connect(**db_config)
    cursor = connection.cursor()

    # Interogare pentru a obține doar coloanele name și email din tabela users
    cursor.execute("SELECT name, email FROM users")
    users = cursor.fetchall()

    # Închide conexiunea și cursorul
    cursor.close()
    connection.close()

    # Transformă rezultatul în format JSON și returnează
    user_data = [{'name': user[0], 'email': user[1]} for user in users]
    return jsonify({'users': user_data})

if __name__ == '__main__':
    app.run(debug=True)
